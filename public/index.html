<!DOCTYPE html>
<html lang=en>
<head>
	<meta charset=utf-8>
	<meta name=viewport content='width=device-width,initial-scale=1'>

	<title>Efimera - JS Live Coding Environment</title>

	<link rel=icon type=image/png href=./favicon.png>
	<link rel=stylesheet href=./build/bundle.css>

	<script defer src=./build/bundle.js></script>
	<script>
		window.pikaImport = (pkg, ns, d = false) => {
			if (ns === undefined) ns = pkg;

			let p =
				import('https://cdn.pika.dev/' + pkg)
					.then(m => window[ns] = d ? m.default : m)

			return p
		}

		window.unpkgImport = (pkg, ns, d = false) => {
			if (ns === undefined) ns = pkg;

			let p = 
				import('https://unpkg.com/' + pkg)
					.then(m => window[ns] = d ? m.default : m)

			return p
		}
	</script>
	<script defer src=./libs/rxjs/bundles/rxjs.umd.min.js></script>
	<script defer type=module src=./libs/midi-parser-js/src/main.js></script>
	<script defer type=module>
		// Make everything of rxjs, RxMidi and of LinnStrument
		// directly accesible in global namespace
		for (let p in efimera.RxMidi) 
			window[p] = efimera.RxMidi[p]

		for (let p in efimera.RxMusic)
			window[p] = efimera.RxMusic[p]

		for (let p in efimera.RxMusic_Defs)
			window[p] = efimera.RxMusic_Defs[p]

		for (let p in efimera.LinnStrumentJS)
			window[p] = efimera.LinnStrumentJS[p]

		window.rx = rxjs
		window.rxo = rxjs.operators
		window.BehaviorSubject = rxjs.BehaviorSubject
		window.from = rxjs.from
		window.interval = rxjs.interval
		window.merge = rxjs.merge
		window.of = rxjs.of
		window.pipe = rxjs.pipe
		window.Subject = rxjs.Subject
		window.filter = rxjs.operators.filter
		window.map = rxjs.operators.map
		window.mapTo = rxjs.operators.mapTo
		window.mergeMap = rxjs.operators.mergeMap
		window.reduce = rxjs.operators.reduce
		window.scan = rxjs.operators.scan
		window.take = rxjs.operators.take
		window.tap = rxjs.operators.tap
	</script>
</head>
<body>
</body>
</html>
